<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù‚Ø§Ø±Ø¦ Ø§Ù„Ù…Ø§Ù†Ù‡ÙˆØ§ - Ù…Ø­Ø§ÙƒØ§Ø© ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</title>
    <style>
        /* ========================================= */
        /* ØªØµÙ…ÙŠÙ…Ø§Øª CSS Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©             */
        /* ========================================= */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            background-color: #f0f0f0;
            direction: rtl;
        }

        .app-container {
            max-width: 500px; /* Ù…Ø­Ø§ÙƒØ§Ø© Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ø§Ù„Ù‡Ø§ØªÙ */
            height: 100vh;
            margin: auto;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø¹Ù„ÙˆÙŠ (Ø±Ø£Ø³ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚) */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background-color: #007bff;
            color: white;
            position: sticky;
            top: 0;
            z-index: 100;
            height: 50px;
        }

        .top-bar .icon {
            font-size: 1.5em;
            cursor: pointer;
            line-height: 1; /* Ù„Ø¶Ù…Ø§Ù† Ù…Ø­Ø§Ø°Ø§Ø© Ø§Ù„Ø±Ù…ÙˆØ² Ø¨Ø´ÙƒÙ„ Ø¬ÙŠØ¯ */
        }
        
        /* Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø©/Ø§Ù„Ø®Ù„Ù */
        #back-button {
            display: none; 
        }

        /* Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø´Ø§Ø´Ø© */
        .screen {
            height: calc(100% - 50px);
            overflow-y: auto;
            padding-bottom: 70px;
            transition: transform 0.3s ease-in-out;
            box-sizing: border-box;
        }
        
        .screen:not(.active) {
            display: none;
        }


        /* ========================================= */
        /* 1. ÙˆØ§Ø¬Ù‡Ø© Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø§Ù†Ù‡ÙˆØ§ (Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©) */
        /* ========================================= */

        .search-bar {
            padding: 10px 15px;
            background-color: #f7f7f7;
            border-bottom: 1px solid #eee;
        }

        .search-input-container {
            display: flex;
            align-items: center;
            background-color: white;
            border-radius: 25px;
            border: 1px solid #ddd;
            padding: 8px 15px;
        }

        .search-input-container input {
            flex-grow: 1;
            border: none;
            outline: none;
            padding-right: 10px;
            font-size: 1em;
            text-align: right;
        }

        .manhwa-grid {
            display: flex;
            flex-wrap: wrap;
            padding: 15px;
            gap: 15px;
            justify-content: space-around;
        }

        .manhwa-card {
            width: 45%;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            cursor: pointer;
            text-align: center;
            transition: transform 0.2s;
        }

        .manhwa-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-bottom: 1px solid #eee;
        }

        .manhwa-info h3 {
            font-size: 1.1em;
            margin: 5px 0 2px 0;
            color: #333;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .manhwa-info p {
            font-size: 0.85em;
            color: #888;
            margin: 0;
        }
        
        /* Ø´Ø§Ø´Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø© Ø¨Ø³ÙŠØ·Ø© */
        #favorites-list {
            display: flex;
            flex-wrap: wrap;
            padding: 15px;
            gap: 15px;
            justify-content: space-around;
        }


        /* ========================================= */
        /* 2. ÙˆØ§Ø¬Ù‡Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø§Ù†Ù‡ÙˆØ§          */
        /* ========================================= */

        .details-header {
            position: relative;
            height: 250px;
        }

        .details-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.7), rgba(0,0,0,0));
            padding: 15px;
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
        }

        /* Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù…ÙØ¶Ù„Ø© (Ø§Ù„Ù‚Ù„Ø¨ Ø¨Ø¯ÙˆÙ† Ø®Ù„ÙÙŠØ©) */
        #favorite-button-container {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 50;
        }

        .favorite-icon {
            color: #ccc; /* Ù„ÙˆÙ† Ø§Ù„Ù‚Ù„Ø¨ Ø§Ù„ÙØ§Ø±Øº: ğŸ¤ */
            transition: color 0.2s;
            font-size: 1.8em;
        }

        .favorite-icon.active {
            color: #ff3b30; /* Ù‚Ù„Ø¨ Ù…Ù…ØªÙ„Ø¦ Ø£Ø­Ù…Ø±: â¤ï¸ */
        }

        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙØµÙˆÙ„ */
        .chapter-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .chapter-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
            cursor: pointer;
        }

        /* ========================================= */
        /* 3. ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© (Ø§Ù„Ù‚Ø§Ø±Ø¦)            */
        /* ========================================= */
        
        #reader-screen {
            padding-bottom: 0;
            background-color: #222;
        }
        
        .reader-controls {
            position: sticky;
            bottom: 0;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 10px;
            background-color: #333;
            color: white;
            z-index: 90;
        }
        
        .reader-controls button {
            background: none;
            border: none;
            color: white;
            font-size: 1.1em;
            padding: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .reader-content img {
            width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
        }

    </style>
</head>
<body>

<div class="app-container">
    
    <div class="top-bar">
        <span id="back-button" class="icon" onclick="goBack()">â¯</span> 
        <span id="header-title">ÙˆØ§Ø¬Ù‡Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø§Ù†Ù‡ÙˆØ§Øª</span>
        <span class="icon">â‹®</span> 
    </div>

    <div id="home-screen" class="screen active">
        <div class="search-bar">
            <div class="search-input-container">
                <span style="color:#999; font-size: 1.2em;">ğŸ”</span>
                <input type="text" id="manhwa-search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø§Ù†Ù‡ÙˆØ§..." onkeyup="filterManhwa()">
            </div>
        </div>
        
        <div style="display:flex; justify-content:space-around; padding:10px 15px; background-color:#fff; border-bottom:1px solid #eee;">
            <button onclick="showList('all')" style="background:none; border:none; color:#007bff; font-weight:bold;">Ø§Ù„ÙƒÙ„</button>
            <button onclick="showList('favorites')" style="background:none; border:none; color:#555;">Ø§Ù„Ù…ÙØ¶Ù„Ø©</button>
        </div>

        <div class="manhwa-grid" id="manhwa-list">
            </div>
        
        <div class="manhwa-grid" id="favorites-list" style="display:none;">
            <p style="text-align:center; width:100%; color:#888; margin-top:20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø§Ù†Ù‡ÙˆØ§Øª ÙÙŠ Ø§Ù„Ù…ÙØ¶Ù„Ø© Ø­Ø§Ù„ÙŠÙ‹Ø§.</p>
        </div>
    </div>

    <div id="details-screen" class="screen">
        
        <div id="favorite-button-container">
            <button id="favorite-button" onclick="toggleFavorite()">
                <span class="favorite-icon" id="heart-icon">ğŸ¤</span>
            </button>
        </div>

        <div class="details-header">
            <img id="details-cover" src="placeholder.jpg" alt="ØºÙ„Ø§Ù Ø§Ù„Ù…Ø§Ù†Ù‡ÙˆØ§">
            <div class="details-overlay">
                <h2 id="details-title"></h2>
                <p id="details-rating"></p>
                <p id="details-chapters-count"></p>
            </div>
        </div>

        <div class="details-content">
            <h3>Ø§Ù„Ù‚ØµØ© ÙˆØ§Ù„ØªØµÙ†ÙŠÙ</h3>
            <p id="details-category"></p>
            <p class="story-text" id="details-story"></p>

            <h3>Ø§Ù„ÙØµÙˆÙ„</h3>
            <ul class="chapter-list" id="details-chapter-list"></ul>
        </div>
    </div>

    <div id="reader-screen" class="screen">
        <div class="reader-content" id="chapter-images-container"></div>
        
        <div class="reader-controls">
            <button onclick="changeChapter(-1)" id="prev-chapter-btn" disabled>
                <span class="icon">â®</span> Ø§Ù„ÙØµÙ„ Ø§Ù„Ø³Ø§Ø¨Ù‚
            </button>
            <span id="current-chapter-info"></span>
            <button onclick="changeChapter(1)" id="next-chapter-btn">
                Ø§Ù„ÙØµÙ„ Ø§Ù„ØªØ§Ù„ÙŠ <span class="icon">â¯</span>
            </button>
        </div>
    </div>

</div>

<script>
    // =========================================
    //           Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø§Ù†Ù‡ÙˆØ§ (MANHWAS_DATA)
    //  **ØªÙ… Ù„ØµÙ‚ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø§Ù†Ù‡ÙˆØ§ "Ø­Ù…Ø²Ùˆ" Ù‡Ù†Ø§ ÙÙŠ ØªØ¹Ø±ÙŠÙ ÙˆØ§Ø­Ø¯ ØµØ­ÙŠØ­**
    // =========================================
    const MANHWAS_DATA = [
        {
            "id": 1,
            "title": "Ø­Ù…Ø²Ùˆ",
            "cover": "data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAA... (BASE64 DATA) ...",
            "category": "Ø£ÙƒØ´Ù†ØŒ Ø®ÙŠØ§Ù„ØŒ Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠ",
            "rating": "â­ 4.5",
            "chapters_count": 1,
            "story": "Ù…Ù„Ø®Øµ Ù‚ØµØ© Ø§Ù„Ù…Ø§Ù†Ù‡ÙˆØ§...Ø²ÙŠÙ†ÙŠÙ†Ù†Ù†Ù†ÙŠÙ†",
            "chapters": [
                {
                    "num": 1,
                    "title": "",
                    "images": [
                        "data:image/jpeg;base64,/9j/4QcnRXhpZgAATU0AKgAAAA... (BASE64 DATA) ...",
                        "data:image/jpeg;base64,/9j/4Q5URXhpZgAATU0AKgAAAA... (BASE64 DATA) ...",
                        "data:image/jpeg;base64,/9j/4QebRXhpZgAATU0AKgAAAA... (BASE64 DATA) ...",
                        "data:image/jpeg;base64,/9j/4QdqRXhpZgAATU0AKgAAAA... (BASE64 DATA) ...",
                        "data:image/jpeg;base64,/9j/4QdwRXhpZgAATU0AKgAAAA... (BASE64 DATA) ...",
                        "data:image/jpeg;base64,/9j/4QemRXhpZgAATU0AKgAAAA... (BASE64 DATA) ..."
                    ]
                }
            ]
        }
    ];

    let currentManhwa = null;
    let currentChapterIndex = -1;
    let currentScreen = 'home';
    
    // Ø§Ù„Ù…ÙØ¶Ù„Ø© ØªØ³ØªØ®Ø¯Ù… localStorage Ù„Ù„Ø­ÙØ¸ Ø¨ÙŠÙ† Ù…Ø±Ø§Øª Ø§Ù„ØªØ­Ù…ÙŠÙ„
    let favorites = new Set(JSON.parse(localStorage.getItem('manhwa_favorites') || '[]'));
    
    function saveFavorites() {
        localStorage.setItem('manhwa_favorites', JSON.stringify(Array.from(favorites)));
    }


    // =========================================
    //           ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
    // =========================================
    
    function showScreen(screenName) {
        document.querySelectorAll('.screen').forEach(screen => {
            screen.classList.remove('active');
            screen.style.display = 'none';
        });

        const activeScreen = document.getElementById(`${screenName}-screen`);
        activeScreen.classList.add('active');
        activeScreen.style.display = 'block';

        currentScreen = screenName;
        updateTopBar();
    }
    
    function updateTopBar() {
        const headerTitle = document.getElementById('header-title');
        const backButton = document.getElementById('back-button');

        backButton.style.display = (currentScreen !== 'home' ? 'block' : 'none');

        if (currentScreen === 'home') {
            headerTitle.textContent = "Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø§Ù†Ù‡ÙˆØ§Øª";
        } else if (currentScreen === 'details' && currentManhwa) {
            headerTitle.textContent = currentManhwa.title;
        } else if (currentScreen === 'reader' && currentManhwa && currentChapterIndex !== -1) {
            const chapter = currentManhwa.chapters[currentChapterIndex];
            const chapterTitle = chapter.title ? `: ${chapter.title}` : '';
            headerTitle.textContent = `ÙØµÙ„ ${chapter.num}${chapterTitle}`; 
        }
    }
    
    function goBack() {
        if (currentScreen === 'details') {
            showScreen('home');
        } else if (currentScreen === 'reader' && currentManhwa) {
            showDetails(currentManhwa.id);
        }
    }

    function renderManhwaCards(list, containerId) {
        const container = document.getElementById(containerId);
        container.innerHTML = ''; 
        
        if (list.length === 0) {
             container.innerHTML = '<p style="text-align:center; width:100%; color:#888; margin-top:20px;">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ø§Ù†Ù‡ÙˆØ§Øª.</p>';
             return;
        }

        list.forEach(manhwa => {
            const card = document.createElement('div');
            card.className = 'manhwa-card';
            card.setAttribute('onclick', `showDetails(${manhwa.id})`); 
            
            card.innerHTML = `
                <img src="${manhwa.cover}" alt="${manhwa.title}">
                <div class="manhwa-info">
                    <h3>${manhwa.title}</h3>
                    <p>${manhwa.category}</p>
                </div>
            `;
            container.appendChild(card);
        });
    }

    function filterManhwa() {
        const searchTerm = document.getElementById('manhwa-search').value.toLowerCase();
        const filteredList = MANHWAS_DATA.filter(manhwa => 
            manhwa.title.toLowerCase().includes(searchTerm) || 
            manhwa.category.toLowerCase().includes(searchTerm)
        );
        renderManhwaCards(filteredList, 'manhwa-list');
    }
    
    function showList(type) {
        const allList = document.getElementById('manhwa-list');
        const favList = document.getElementById('favorites-list');
        
        document.querySelectorAll('button[onclick^="showList"]').forEach(btn => {
            btn.style.color = '#555';
            btn.style.fontWeight = 'normal';
        });
        const activeBtn = document.querySelector(`button[onclick="showList('${type}')"]`);
        if(activeBtn) {
            activeBtn.style.color = '#007bff';
            activeBtn.style.fontWeight = 'bold';
        }

        if (type === 'all') {
            allList.style.display = 'flex';
            favList.style.display = 'none';
        } else {
            const favoriteManhwas = MANHWAS_DATA.filter(m => favorites.has(m.id));
            renderManhwaCards(favoriteManhwas, 'favorites-list');
            allList.style.display = 'none';
            favList.style.display = 'flex';
        }
    }
    
    function showDetails(id) {
        const manhwa = MANHWAS_DATA.find(m => m.id === id);
        if (!manhwa) return;

        currentManhwa = manhwa;

        document.getElementById('details-title').textContent = manhwa.title;
        document.getElementById('details-rating').textContent = `Ø§Ù„ØªÙ‚ÙŠÙŠÙ…: ${manhwa.rating}`;
        document.getElementById('details-chapters-count').textContent = `Ø¹Ø¯Ø¯ Ø§Ù„ÙØµÙˆÙ„: ${manhwa.chapters_count}`;
        document.getElementById('details-category').innerHTML = `Ø§Ù„ØªØµÙ†ÙŠÙ: <span style="color:red; font-weight:bold;">${manhwa.category}</span>`;
        document.getElementById('details-story').textContent = manhwa.story;
        document.getElementById('details-cover').src = manhwa.cover; 
        
        // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø²Ø± Ø§Ù„Ù…ÙØ¶Ù„Ø©
        const heartIcon = document.getElementById('heart-icon');
        if (favorites.has(id)) {
            heartIcon.classList.add('active');
            heartIcon.innerHTML = 'â¤ï¸'; // Ù‚Ù„Ø¨ Ù…Ù…ØªÙ„Ø¦
        } else {
            heartIcon.classList.remove('active');
            heartIcon.innerHTML = 'ğŸ¤'; // Ù‚Ù„Ø¨ ÙØ§Ø±Øº
        }

        // Ø¨Ù†Ø§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙØµÙˆÙ„ (ØªÙ†Ø§Ø²Ù„ÙŠÙ‹Ø§)
        const chapterList = document.getElementById('details-chapter-list');
        chapterList.innerHTML = '';
        const sortedChapters = [...manhwa.chapters].sort((a, b) => b.num - a.num);
        
        sortedChapters.forEach((chapter) => {
            const originalIndex = manhwa.chapters.findIndex(c => c.num === chapter.num);

            const listItem = document.createElement('li');
            listItem.className = 'chapter-item';
            listItem.setAttribute('onclick', `readChapter(${originalIndex})`);
            
            const chapterTitle = chapter.title ? `: ${chapter.title}` : '';
            listItem.innerHTML = `
                <span>ÙØµÙ„ ${chapter.num}${chapterTitle}</span>
                <span style="color:#007bff; font-weight:bold;">â¯</span> `;
            chapterList.appendChild(listItem);
        });
        
        showScreen('details');
    }
    
    function toggleFavorite() {
        if (!currentManhwa) return;

        const id = currentManhwa.id;
        const heartIcon = document.getElementById('heart-icon');
        
        if (favorites.has(id)) {
            favorites.delete(id);
            heartIcon.classList.remove('active');
            heartIcon.innerHTML = 'ğŸ¤';
            alert(`ØªÙ…Øª Ø¥Ø²Ø§Ù„Ø© ${currentManhwa.title} Ù…Ù† Ø§Ù„Ù…ÙØ¶Ù„Ø©.`);
        } else {
            favorites.add(id);
            heartIcon.classList.add('active');
            heartIcon.innerHTML = 'â¤ï¸';
            alert(`ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ${currentManhwa.title} Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙØ¶Ù„Ø©!`);
        }
        saveFavorites(); 
        showList('favorites');
    }
    
    function readChapter(index) {
        if (!currentManhwa || index < 0 || index >= currentManhwa.chapters.length) return;
        
        currentChapterIndex = index;
        const chapter = currentManhwa.chapters[currentChapterIndex];
        const imageContainer = document.getElementById('chapter-images-container');
        imageContainer.innerHTML = ''; 

        chapter.images.forEach(src => {
            const img = document.createElement('img');
            img.src = src; 
            img.alt = `ØµÙˆØ±Ø© Ø§Ù„ÙØµÙ„ ${chapter.num}`;
            imageContainer.appendChild(img);
        });
        
        updateReaderControls();
        showScreen('reader');
    }
    
    function changeChapter(delta) {
        const newIndex = currentChapterIndex + delta;
        if (newIndex >= 0 && newIndex < currentManhwa.chapters.length) {
            readChapter(newIndex);
            document.getElementById('reader-screen').scrollTop = 0;
        }
    }
    
    function updateReaderControls() {
        const prevBtn = document.getElementById('prev-chapter-btn');
        const nextBtn = document.getElementById('next-chapter-btn');
        const infoSpan = document.getElementById('current-chapter-info');
        
        prevBtn.disabled = (currentChapterIndex <= 0);
        nextBtn.disabled = (currentChapterIndex >= currentManhwa.chapters.length - 1);
        
        const currentChapter = currentManhwa.chapters[currentChapterIndex];
        infoSpan.textContent = `ÙØµÙ„ ${currentChapter.num} Ù…Ù† ${currentManhwa.chapters.length}`;
    }


    window.onload = () => {
        if (MANHWAS_DATA.length > 0) {
            renderManhwaCards(MANHWAS_DATA, 'manhwa-list');
        } else {
             document.getElementById('manhwa-list').innerHTML = '<p style="text-align:center; width:100%; color:#888; margin-top:20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø§Ù†Ù‡ÙˆØ§Øª Ù„Ø¹Ø±Ø¶Ù‡Ø§.</p>';
        }
        showScreen('home');
    };
</script>

</body>
</html>
